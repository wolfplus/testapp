<ion-header translucent="true"
    class="top-element-bs">
    <app-default-header
        [title]="'title_courses'"
        [subtitle]=""
        (back)="close()">
        <ion-segment
            (ionChange)="segmentChanged($event)"
            value="{{selectedView}}"
            scrollable="true"
            mode="md"
            class="header-center">
            <ion-segment-button
                style="width: 33%"
                value="next">
                <!-- TODO: fix translate pipe issue -->
                <ion-label class="tabs-item">{{'to_come'|translate}}</ion-label>
            </ion-segment-button>
            <ion-segment-button
                style="width: 33%"
                value="past">
                <ion-label class="tabs-item">{{'passed_matches'|translate}}</ion-label>
            </ion-segment-button>
            <ion-segment-button style="width: 33%"
                    value="canceled">
                <ion-label class="tabs-item">{{'canceled_matches'|translate}}</ion-label>
            </ion-segment-button>
        </ion-segment>
    </app-default-header>
</ion-header>
<ion-content>
    <ng-container *ngIf="bookings && showSkeleton === false"
        class="booking-container do-mt-2">
        <ng-container *ngIf="pastBookings.length">
            <ng-container *ngFor="let bookingsByDate of pastBookingsByDate">
                <div class="eventDay">{{ bookingsByDate.date }}</div>
                <ng-container  *ngFor="let booking of bookingsByDate.events">
                    <app-card-cours
                    (onClose)="refresh($event)"
                    [oneCourse]="booking">
                    </app-card-cours>
                  </ng-container>
            </ng-container>
        </ng-container>

        <ng-container *ngIf="yesterdayBookings?.length">
            <div  *ngFor="let booking of yesterdayBookings">
                <app-card-cours
                (onClose)="refresh($event)"
                [oneCourse]="booking">
                </app-card-cours>
            </div>
        </ng-container>
        <ng-container *ngIf="todayBookings?.length">
            <div class="eventDay">{{ 'today' | translate }}</div>
            <div  *ngFor="let booking of todayBookings">
                <app-card-cours
                (onClose)="refresh($event)"
                [oneCourse]="booking">
                </app-card-cours>
            </div>
        </ng-container>
        <ng-container *ngIf="tomorrowBookings?.length">
            <div class="eventDay">{{ 'tomorrow' | translate }}</div>
            <div  *ngFor="let booking of tomorrowBookings">
                <app-card-cours
                (onClose)="refresh($event)"
                [oneCourse]="booking">
                </app-card-cours>
            </div>
        </ng-container>
        <ng-container *ngIf="otherDaysBookings?.length">
            <ng-container *ngFor="let bookingsByDate of otherDaysBookingsByDate">
                <div class="eventDay">{{ bookingsByDate.date }}</div>
            
                <div *ngFor="let booking of bookingsByDate.events">
                    <app-card-cours
                    (closeModalRefresh)="refresh($event)"
                    [oneCourse]="booking">
                    </app-card-cours>
                </div>
            </ng-container>
        </ng-container>
       <!--  <app-card-my-booking *ngFor="let booking of data"
            [booking]="booking"
            (reload)="reload()"
            class="bloc-booking">
        </app-card-my-booking> -->
    </ng-container>

    <div *ngIf="!showSkeleton && bookings">
        <div *ngIf="bookings.length == 0" class="do-pt-2 do-pb-2 do-pl-7 do-pr-7">
            <img src="assets/images/illustrations{{env?.useMb?'_' + env.marqueBlanche.pathName:''}}/no_result.svg" alt="">
        </div>
        <div *ngIf="selectedView === 'next' && bookings.length == 0"
            class="do-p-2 text-center">
            {{ 'you_do_not_have_upcoming_cours' | translate }}
        </div>
        <div *ngIf="selectedView === 'past' && bookings.length == 0"
            class="do-p-2 text-center">
            {{ 'you_do_not_have_past_cours' | translate }}
        </div>
        <div *ngIf="selectedView === 'canceled' && bookings.length == 0"
            class="do-p-2 text-center">
            {{ 'you_do_not_have_canceled_cours' | translate }}
        </div>
    </div>

    <!-- SKELETON -->
    <div *ngIf="showSkeleton"
        style="height: 3rem; width: 100%;">
        <div>
            <ion-skeleton-text animated></ion-skeleton-text>
        </div>
        <div class="do-p-2">
            <div *ngFor="let item of [1,2,3,4,5]"
            class="flex jcfs aifs do-mb-1">
            <ion-thumbnail style="height:25vw; width:25vw;margin-right:2rem;">
                <ion-skeleton-text animated style="border-radius:5px;"></ion-skeleton-text>
            </ion-thumbnail>
            <div class="flex d-col" style="width: 50%;">
                <ion-skeleton-text animated></ion-skeleton-text>
                <ion-skeleton-text animated></ion-skeleton-text>
                <ion-skeleton-text animated></ion-skeleton-text>
                <ion-skeleton-text animated></ion-skeleton-text>
            </div>
            </div>
        </div>
    </div>

    <!-- INFINITE SCROLL -->
    <!-- <ion-infinite-scroll
        threshold="50px"
        (ionInfinite)="loadMoreData($event)">
        <ion-infinite-scroll-content
            loadingSpinner="bubbles"
            loadingText="{{'loading_more_bookings' | translate }}">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll> -->
</ion-content>
